<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Painel do Professor</title>

  <!-- Ícones Remix e CSS -->
  <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
  <link rel="stylesheet" href="professor.css" />
</head>
<body>
  <!-- ===== BARRA SUPERIOR ===== -->
  <header class="barra-superior">
    <div class="logo">
      <i class="ri-graduation-cap-line"></i>
      <span>Painel do Professor</span>
    </div>
    <nav class="menu-topo">
      <ul>
        <li class="ativo" onclick="mostrar('dashboard')"><i class="ri-dashboard-line"></i> Dashboard</li>
        <li onclick="mostrar('disciplinas')"><i class="ri-book-open-line"></i> Disciplinas</li>
        <li onclick="mostrar('turmas')"><i class="ri-group-line"></i> Turmas</li>
        <li onclick="mostrar('notas')"><i class="ri-file-list-3-line"></i> Lançar Notas</li>
        <li onclick="mostrar('relatorios')"><i class="ri-bar-chart-2-line"></i> Relatórios</li>
        <li onclick="mostrar('calendario')"><i class="ri-calendar-line"></i> Calendário</li>
        <li onclick="mostrar('mensagens')"><i class="ri-mail-line"></i> Mensagens</li>
        <li onclick="mostrar('perfil')"><i class="ri-user-settings-line"></i> Perfil</li>
      </ul>
    </nav>
    <button class="logout" onclick="logout()">
      <i class="ri-logout-box-line"></i> Sair
    </button>
  </header>

  <!-- ===== CONTEÚDO PRINCIPAL ===== -->
  <main class="conteudo-principal">
    <section class="cabecalho">
      <h1>Bem-vindo(a), <span id="nomeProfessor">Prof. Ana Souza</span>!</h1>
      <p>Gerencie suas disciplinas, turmas e notas com praticidade.</p>
    </section>

    <section class="dashboard-professor">
      <div class="card" onclick="mostrar('notas')">
        <i class="ri-file-list-3-line"></i>
        <h2>Lançar Notas</h2>
        <p>Registre e atualize as notas dos alunos.</p>
      </div>

      <div class="card" onclick="mostrar('turmas')">
        <i class="ri-group-line"></i>
        <h2>Gerenciar Turmas</h2>
        <p>Visualize e organize suas turmas.</p>
      </div>

      <div class="card" onclick="mostrar('disciplinas')">
        <i class="ri-book-open-line"></i>
        <h2>Minhas Disciplinas</h2>
        <p>Acesse e edite suas disciplinas ativas.</p>
      </div>

      <div class="card" onclick="mostrar('relatorios')">
        <i class="ri-bar-chart-2-line"></i>
        <h2>Relatórios</h2>
        <p>Veja o desempenho dos alunos por turma.</p>
      </div>

      <div class="card" onclick="mostrar('mensagens')">
        <i class="ri-mail-line"></i>
        <h2>Mensagens</h2>
        <p>Envie e receba mensagens entre alunos e administração.</p>
      </div>

      <div class="card" onclick="mostrar('calendario')">
        <i class="ri-calendar-line"></i>
        <h2>Calendário</h2>
        <p>Visualize datas de provas e eventos acadêmicos.</p>
      </div>

      <div class="card" onclick="mostrar('perfil')">
        <i class="ri-user-settings-line"></i>
        <h2>Perfil</h2>
        <p>Atualize suas informações pessoais e senha.</p>
      </div>
    </section>

    <!-- ===== PÁGINAS ===== -->
<section id="disciplinas" class="pagina oculto">
  <h2>Minhas Disciplinas</h2>
</section>

<section id="turmas" class="pagina oculto">
  <h2>Gerenciar Turmas</h2>
</section>

<!-- ✅ NOVA SEÇÃO DE LANÇAMENTO DE NOTAS -->
<section id="notas" class="pagina oculto">
  <h2>Lançar Notas</h2>

  <div class="form-lancar-notas">

    <label for="disciplinaSelect">Disciplina:</label>
    <select id="disciplinaSelect">
      <option value="">Selecione...</option>
    </select>

    <label for="turmaSelect">Turma:</label>
    <select id="turmaSelect">
      <option value="">Selecione uma disciplina primeiro...</option>
    </select>

    <div id="listaAlunos" class="lista-alunos oculto">
      <h3>Alunos da Turma</h3>
      <table>
        <thead>
          <tr>
            <th>Aluno</th>
            <th>Nota</th>
          </tr>
        </thead>
        <tbody id="alunosTabela"></tbody>
      </table>

      <button onclick="salvarNotas()" class="btn-salvar">Salvar Notas</button>
    </div>

  </div>
</section>

<section id="relatorios" class="pagina oculto">
  <h2>Relatórios de Notas</h2>

  <div class="relatorio-box">
    <table>
      <thead>
        <tr>
          <th>Aluno</th>
          <th>Nota</th>
        </tr>
      </thead>
      <tbody id="tabelaRelatorio"></tbody>
    </table>
  </div>
</section>

<section id="calendario" class="pagina oculto">
  <h2>Calendário Acadêmico</h2>

  <div class="calendario-container">
    <div class="calendario-header">
      <button id="mesAnterior"><i class="ri-arrow-left-s-line"></i></button>
      <h3 id="mesAtual"></h3>
      <button id="mesProximo"><i class="ri-arrow-right-s-line"></i></button>
    </div>

    <table class="calendario-tabela">
      <thead>
        <tr>
          <th>Dom</th><th>Seg</th><th>Ter</th><th>Qua</th><th>Qui</th><th>Sex</th><th>Sáb</th>
        </tr>
      </thead>
      <tbody id="diasCalendario"></tbody>
    </table>
  </div>
</section>

<section id="mensagens" class="pagina oculto">
  <h2>Mensagens</h2>
</section>

<section id="perfil" class="pagina oculto">
  <h2>Perfil do Professor</h2>
</section>

  </main>

<script>
document.getElementById("nomeProfessor").textContent =
  localStorage.getItem("nomeUsuario") || "Prof. Ana Souza";

// Dados temporários
const disciplinas = {
  "Matemática": ["Turma A", "Turma B"],
  "Português": ["Turma A"],
  "História": ["Turma C"]
};

const alunosPorTurma = {
  "Turma A": ["Lucas", "Mariana", "João", "Ana Paula"],
  "Turma B": ["Carlos", "Júlia", "Miguel"],
  "Turma C": ["Rafaela", "Tiago", "Eduardo"]
};

const disciplinaSelect = document.getElementById("disciplinaSelect");
const turmaSelect = document.getElementById("turmaSelect");
const listaAlunosDiv = document.getElementById("listaAlunos");
const alunosTabela = document.getElementById("alunosTabela");

// Carregar disciplinas
Object.keys(disciplinas).forEach(d => {
  disciplinaSelect.innerHTML += `<option value="${d}">${d}</option>`;
});

// Escolher disciplina → carregar turmas
disciplinaSelect.onchange = () => {
  turmaSelect.innerHTML = '<option value="">Selecione...</option>';
  alunosTabela.innerHTML = "";
  listaAlunosDiv.classList.add("oculto");

  if (disciplinaSelect.value) {
    disciplinas[disciplinaSelect.value].forEach(t => {
      turmaSelect.innerHTML += `<option value="${t}">${t}</option>`;
    });
  }
};

// Escolher turma → carregar alunos
turmaSelect.onchange = () => {
  alunosTabela.innerHTML = "";
  if (!turmaSelect.value) return;

  alunosPorTurma[turmaSelect.value].forEach(aluno => {
    alunosTabela.innerHTML += `
      <tr>
        <td>${aluno}</td>
        <td><input type="number" min="0" max="10" step="0.1"></td>
      </tr>`;
  });

  listaAlunosDiv.classList.remove("oculto");
};

// Salvar notas
function salvarNotas() {
  const linhas = alunosTabela.querySelectorAll("tr");
  let dados = [];

  linhas.forEach(linha => {
    const nome = linha.children[0].textContent;
    const nota = linha.children[1].children[0].value || "-";
    dados.push({ aluno: nome, nota });
  });

  localStorage.setItem("notas", JSON.stringify(dados));
  alert("Notas salvas com sucesso!");
}

// Carregar tabela de relatórios
function carregarRelatorio() {
  const tabela = document.getElementById("tabelaRelatorio");
  tabela.innerHTML = "";

  const notasSalvas = JSON.parse(localStorage.getItem("notas")) || [];

  notasSalvas.forEach(dado => {
    tabela.innerHTML += `
      <tr>
        <td>${dado.aluno}</td>
        <td>${dado.nota}</td>
      </tr>`;
  });
}

// Navegação SPA + Ativar menu + carregar relatórios
function mostrar(pagina) {

  // Esconde tudo primeiro
  document.querySelector(".dashboard-professor").style.display = (pagina === "dashboard") ? "grid" : "none";
  document.querySelectorAll(".pagina").forEach(sec => sec.classList.add("oculto"));

  // Remove destaque e coloca no clicado
  document.querySelectorAll(".menu-topo ul li").forEach(li => li.classList.remove("ativo"));
  document.querySelector(`[onclick="mostrar('${pagina}')"]`)?.classList.add("ativo");

  // Mostrar página escolhida
  document.getElementById(pagina)?.classList.remove("oculto");

  // Se abriu relatórios → recarrega notas
  if (pagina === "relatorios") carregarRelatorio();
}

// Logout
function logout() {
  localStorage.clear();
  window.location.href = "index.html";
}

// ================== CALENDÁRIO ==================
const mesAtualElemento = document.getElementById("mesAtual");
const diasCalendario = document.getElementById("diasCalendario");
const mesAnteriorBtn = document.getElementById("mesAnterior");
const mesProximoBtn = document.getElementById("mesProximo");

let data = new Date();

function renderizarCalendario() {
  const ano = data.getFullYear();
  const mes = data.getMonth();

  const primeiroDia = new Date(ano, mes, 1).getDay();
  const ultimoDia = new Date(ano, mes + 1, 0).getDate();

  const nomesMeses = [
    "Janeiro","Fevereiro","Março","Abril","Maio","Junho",
    "Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"
  ];

  mesAtualElemento.textContent = `${nomesMeses[mes]} ${ano}`;
  diasCalendario.innerHTML = "";

  let linha = "<tr>";
  for (let i = 0; i < primeiroDia; i++) linha += "<td></td>";

  for (let dia = 1; dia <= ultimoDia; dia++) {
    const hoje = new Date();
    const classe = (dia === hoje.getDate() && mes === hoje.getMonth() && ano === hoje.getFullYear()) ? "hoje" : "";
    linha += `<td class="${classe}">${dia}</td>`;
    if ((dia + primeiroDia) % 7 === 0) {
      linha += "</tr><tr>";
    }
  }

  linha += "</tr>";
  diasCalendario.innerHTML = linha;
}

mesAnteriorBtn.onclick = () => { data.setMonth(data.getMonth() - 1); renderizarCalendario(); };
mesProximoBtn.onclick = () => { data.setMonth(data.getMonth() + 1); renderizarCalendario(); };

renderizarCalendario();

</script>
</body>
</html>